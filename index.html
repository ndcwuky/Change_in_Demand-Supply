<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¾›éœ€å‡è¡¡äº’å‹•æ•™å­¸ | Supply and Demand Equilibrium Interactive Learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .dark {
            color-scheme: dark;
        }
        
        canvas {
            border-radius: 8px;
            background: white;
        }
        
        .dark canvas {
            background: #2d3748;
        }
        
        .btn-primary {
            background: #5D5CDE;
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            background: #4c4bcc;
            transform: translateY(-1px);
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .dark .card {
            background: #2d3748;
            border: 1px solid #4a5568;
        }
        
        .animate-bounce-gentle {
            animation: bounce-gentle 1s ease-in-out infinite;
        }
        
        @keyframes bounce-gentle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-6 max-w-6xl">
        <!-- èªè¨€åˆ‡æ›æŒ‰éˆ• -->
        <div class="flex justify-end mb-4">
            <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden">
                <button id="langCN" class="px-4 py-2 text-sm font-medium bg-primary text-white">ä¸­æ–‡</button>
                <button id="langEN" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700">English</button>
            </div>
        </div>

        <!-- æ¨™é¡Œ -->
        <div class="text-center mb-8">
            <h1 id="mainTitle" class="text-3xl md:text-4xl font-bold mb-2 text-primary">ä¾›éœ€å‡è¡¡äº’å‹•æ•™å­¸</h1>
            <p id="mainSubtitle" class="text-lg text-gray-600 dark:text-gray-400">è§€å¯Ÿéœ€æ±‚å’Œä¾›çµ¦åŒæ™‚è®ŠåŒ–å°å‡è¡¡åƒ¹æ ¼å’Œæ•¸é‡çš„å½±éŸ¿</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- æ§åˆ¶é¢æ¿ -->
            <div class="lg:col-span-1">
                <div class="card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-center">æ§åˆ¶é¢æ¿</h2>
                    
                    <!-- éœ€æ±‚èª¿æ•´ -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-3 text-blue-600 dark:text-blue-400">ğŸ“ˆ éœ€æ±‚æ›²ç·šèª¿æ•´</label>
                        <div class="space-y-3">
                            <button id="increaseDemand" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg w-full text-base font-medium transition-all duration-200">
                                éœ€æ±‚ä¸Šå‡ â†—ï¸
                            </button>
                            <button id="decreaseDemand" class="bg-blue-400 hover:bg-blue-500 text-white px-4 py-2 rounded-lg w-full text-base font-medium transition-all duration-200">
                                éœ€æ±‚ä¸‹é™ â†˜ï¸
                            </button>
                            <button id="resetDemand" class="bg-blue-300 hover:bg-blue-400 text-white px-4 py-2 rounded-lg w-full text-base font-medium transition-all duration-200">
                                é‡è¨­éœ€æ±‚ ğŸ”„
                            </button>
                        </div>
                    </div>

                    <!-- ä¾›çµ¦èª¿æ•´ -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-3 text-red-600 dark:text-red-400">ğŸ“Š ä¾›çµ¦æ›²ç·šèª¿æ•´</label>
                        <div class="space-y-3">
                            <button id="increaseSupply" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg w-full text-base font-medium transition-all duration-200">
                                ä¾›çµ¦ä¸Šå‡ â†—ï¸
                            </button>
                            <button id="decreaseSupply" class="bg-red-400 hover:bg-red-500 text-white px-4 py-2 rounded-lg w-full text-base font-medium transition-all duration-200">
                                ä¾›çµ¦ä¸‹é™ â†˜ï¸
                            </button>
                            <button id="resetSupply" class="bg-red-300 hover:bg-red-400 text-white px-4 py-2 rounded-lg w-full text-base font-medium transition-all duration-200">
                                é‡è¨­ä¾›çµ¦ ğŸ”„
                            </button>
                        </div>
                    </div>

                    <!-- çµ„åˆèª¿æ•´ -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-3 text-purple-600 dark:text-purple-400">ğŸ”„ çµ„åˆèª¿æ•´</label>
                        <div class="space-y-3">
                            <button id="resetAll" class="btn-primary text-white px-4 py-2 rounded-lg w-full text-base font-medium">
                                å…¨éƒ¨é‡è¨­ â†º
                            </button>
                        </div>
                    </div>


                </div>
            </div>

            <!-- åœ–è¡¨å€åŸŸ -->
            <div class="lg:col-span-2">
                <div class="card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-center">ä¾›éœ€å‡è¡¡åœ–</h2>
                    <div class="relative">
                        <canvas id="economicsChart" width="600" height="400" class="w-full max-w-full"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ¸¬é©—å€åŸŸ -->
        <div class="mt-8 card p-6">
            <h2 class="text-xl font-semibold mb-6 text-center">ğŸ“ äº’å‹•æ¸¬é©—</h2>
            
            <!-- å•é¡Œ 1 -->
            <div class="mb-8">
                <h3 class="text-lg font-medium mb-4">å•é¡Œ 1ï¼šç•¶éœ€æ±‚ä¸Šå‡å’Œä¾›çµ¦åŒæ™‚ä¸Šå‡æ™‚ï¼Œå‡è¡¡æ•¸é‡æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q1" value="A" class="mr-3 text-primary">
                        <span class="text-base">A. å¿…å®šå¢åŠ </span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q1" value="B" class="mr-3 text-primary">
                        <span class="text-base">B. å¿…å®šæ¸›å°‘</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q1" value="C" class="mr-3 text-primary">
                        <span class="text-base">C. ä¸è®Š</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q1" value="D" class="mr-3 text-primary">
                        <span class="text-base">D. ç„¡æ³•ç¢ºå®š</span>
                    </label>
                </div>
                <div id="answer1" class="mt-4 p-4 rounded-lg hidden"></div>
            </div>

            <!-- å•é¡Œ 2 -->
            <div class="mb-8">
                <h3 class="text-lg font-medium mb-4">å•é¡Œ 2ï¼šç•¶éœ€æ±‚ä¸‹é™å’Œä¾›çµ¦åŒæ™‚ä¸‹é™æ™‚ï¼Œå‡è¡¡åƒ¹æ ¼æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q2" value="A" class="mr-3 text-primary">
                        <span class="text-base">A. å¿…å®šä¸Šå‡</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q2" value="B" class="mr-3 text-primary">
                        <span class="text-base">B. å¿…å®šä¸‹é™</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q2" value="C" class="mr-3 text-primary">
                        <span class="text-base">C. ä¸è®Š</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q2" value="D" class="mr-3 text-primary">
                        <span class="text-base">D. ç„¡æ³•ç¢ºå®š</span>
                    </label>
                </div>
                <div id="answer2" class="mt-4 p-4 rounded-lg hidden"></div>
            </div>

            <!-- å•é¡Œ 3 -->
            <div class="mb-8">
                <h3 class="text-lg font-medium mb-4">å•é¡Œ 3ï¼šç•¶éœ€æ±‚ä¸Šå‡ç¨‹åº¦å¤§æ–¼ä¾›çµ¦ä¸Šå‡ç¨‹åº¦æ™‚ï¼Œå‡è¡¡åƒ¹æ ¼æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q3" value="A" class="mr-3 text-primary">
                        <span class="text-base">A. ä¸Šå‡</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q3" value="B" class="mr-3 text-primary">
                        <span class="text-base">B. ä¸‹é™</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q3" value="C" class="mr-3 text-primary">
                        <span class="text-base">C. ä¸è®Š</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q3" value="D" class="mr-3 text-primary">
                        <span class="text-base">D. ç„¡æ³•ç¢ºå®š</span>
                    </label>
                </div>
                <div id="answer3" class="mt-4 p-4 rounded-lg hidden"></div>
            </div>

            <!-- å•é¡Œ 4 -->
            <div class="mb-8">
                <h3 class="text-lg font-medium mb-4">å•é¡Œ 4ï¼šç•¶éœ€æ±‚ä¸Šå‡å’Œä¾›çµ¦åŒæ™‚ä¸‹é™æ™‚ï¼Œå‡è¡¡åƒ¹æ ¼æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q4" value="A" class="mr-3 text-primary">
                        <span class="text-base">A. å¿…å®šä¸Šå‡</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q4" value="B" class="mr-3 text-primary">
                        <span class="text-base">B. å¿…å®šä¸‹é™</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q4" value="C" class="mr-3 text-primary">
                        <span class="text-base">C. ä¸è®Š</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q4" value="D" class="mr-3 text-primary">
                        <span class="text-base">D. ç„¡æ³•ç¢ºå®š</span>
                    </label>
                </div>
                <div id="answer4" class="mt-4 p-4 rounded-lg hidden"></div>
            </div>

            <!-- å•é¡Œ 5 -->
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-4">å•é¡Œ 5ï¼šç•¶éœ€æ±‚ä¸‹é™å¹…åº¦ç­‰æ–¼ä¾›çµ¦ä¸Šå‡å¹…åº¦æ™‚ï¼Œå‡è¡¡åƒ¹æ ¼æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q5" value="A" class="mr-3 text-primary">
                        <span class="text-base">A. å¿…å®šä¸Šå‡</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q5" value="B" class="mr-3 text-primary">
                        <span class="text-base">B. å¿…å®šä¸‹é™</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q5" value="C" class="mr-3 text-primary">
                        <span class="text-base">C. ä¸è®Š</span>
                    </label>
                    <label class="flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                        <input type="radio" name="q5" value="D" class="mr-3 text-primary">
                        <span class="text-base">D. ç„¡æ³•ç¢ºå®š</span>
                    </label>
                </div>
                <div id="answer5" class="mt-4 p-4 rounded-lg hidden"></div>
            </div>
        </div>

        <!-- èªªæ˜å€åŸŸ -->
        <div class="mt-8 card p-6">
            <h2 class="text-xl font-semibold mb-4">ç¶“æ¿Ÿå­¸æ¦‚å¿µèªªæ˜</h2>
            
            <!-- äº’å‹•èªªæ˜ -->
            <div class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800">
                <h3 class="font-semibold text-blue-700 dark:text-blue-300 mb-2">ğŸ“± äº’å‹•åŠŸèƒ½</h3>
                <p class="text-sm text-blue-600 dark:text-blue-400">
                    é»æ“ŠæŒ‰éˆ•å‰µå»ºæ–°çš„éœ€æ±‚æ›²ç·šï¼ˆDâ‚‚ï¼‰å’Œä¾›çµ¦æ›²ç·šï¼ˆSâ‚‚ï¼‰ï¼Œç„¶å¾Œå¯ä»¥ç”¨æ»‘é¼ æˆ–æ‰‹æŒ‡ç›´æ¥æ‹–å‹•æ›²ç·šä¸Šä¸‹ç§»å‹•ï¼Œè§€å¯Ÿå‡è¡¡é»çš„å¯¦æ™‚è®ŠåŒ–ï¼è—è‰²æ›²ç·šç‚ºéœ€æ±‚ï¼Œç´…è‰²æ›²ç·šç‚ºä¾›çµ¦ã€‚
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm">
                <div>
                    <h3 class="font-semibold text-blue-500 mb-2">éœ€æ±‚è®ŠåŒ–çš„å½±éŸ¿ï¼š</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-600 dark:text-gray-400">
                        <li><strong>éœ€æ±‚ä¸Šå‡ï¼š</strong>æ›²ç·šå³ç§»ï¼Œåƒ¹æ ¼â†‘ï¼Œæ•¸é‡â†‘</li>
                        <li><strong>éœ€æ±‚ä¸‹é™ï¼š</strong>æ›²ç·šå·¦ç§»ï¼Œåƒ¹æ ¼â†“ï¼Œæ•¸é‡â†“</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-red-500 mb-2">ä¾›çµ¦è®ŠåŒ–çš„å½±éŸ¿ï¼š</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-600 dark:text-gray-400">
                        <li><strong>ä¾›çµ¦ä¸Šå‡ï¼š</strong>æ›²ç·šå³ç§»ï¼Œåƒ¹æ ¼â†“ï¼Œæ•¸é‡â†‘</li>
                        <li><strong>ä¾›çµ¦ä¸‹é™ï¼š</strong>æ›²ç·šå·¦ç§»ï¼Œåƒ¹æ ¼â†‘ï¼Œæ•¸é‡â†“</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-purple-500 mb-2">åŒæ™‚è®ŠåŒ–çš„å½±éŸ¿ï¼š</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-600 dark:text-gray-400">
                        <li><strong>æ•¸é‡ï¼š</strong>åŒå‘è®ŠåŒ–æ™‚ç¢ºå®šï¼Œåå‘æ™‚ä¸ç¢ºå®š</li>
                        <li><strong>åƒ¹æ ¼ï¼š</strong>åå‘è®ŠåŒ–æ™‚ç¢ºå®šï¼ŒåŒå‘æ™‚ä¸ç¢ºå®š</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ·±è‰²æ¨¡å¼è¨­å®š
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // ç¶“æ¿Ÿå­¸åœ–è¡¨é¡
        class EconomicsChart {
            constructor(canvasId) {
                this.canvas = document.getElementById(canvasId);
                this.ctx = this.canvas.getContext('2d');
                this.width = this.canvas.width;
                this.height = this.canvas.height;
                
                // éœ€æ±‚å’Œä¾›çµ¦åç§»
                this.demandShift = 0;
                this.supplyShift = 0;
                
                // è¨­å®šåœ–è¡¨é‚Šè·
                this.margin = 60;
                this.chartWidth = this.width - 2 * this.margin;
                this.chartHeight = this.height - 2 * this.margin;
                
                // æ‹–å‹•ç›¸é—œç‹€æ…‹
                this.isDragging = false;
                this.dragCurveType = null; // 'demand' æˆ– 'supply'
                this.isHovering = false;
                this.dragStartY = 0;
                this.initialShift = 0;
                
                this.setupEventListeners();
                this.setupInteractionListeners();
                this.draw();
            }
            
            setupEventListeners() {
                // éŸ¿æ‡‰å¼èª¿æ•´
                const resizeCanvas = () => {
                    const container = this.canvas.parentElement;
                    const rect = container.getBoundingClientRect();
                    
                    // æª¢æ¸¬æ˜¯å¦ç‚ºæ‰‹æ©Ÿè¨­å‚™ï¼ˆå¯¬åº¦å°æ–¼768pxï¼‰
                    const isMobile = window.innerWidth < 768;
                    // æª¢æ¸¬æ˜¯å¦ç‚ºå‚ç›´æ–¹å‘ï¼ˆé«˜åº¦å¤§æ–¼å¯¬åº¦ï¼‰
                    const isPortrait = window.innerHeight > window.innerWidth;
                    
                    let scale = Math.min(rect.width / 600, 1);
                    
                    // åœ¨æ‰‹æ©Ÿå‚ç›´æ¨¡å¼ä¸‹ï¼Œåœ–è¡¨æ”¾å¤§ä¸€å€
                    if (isMobile && isPortrait) {
                        scale = Math.min(rect.width / 300, 2); // å°‡åŸºæº–å¾600æ”¹ç‚º300ï¼Œæœ€å¤§ç¸®æ”¾2å€
                    }
                    
                    this.canvas.style.transform = `scale(${scale})`;
                    this.canvas.style.transformOrigin = 'top left';
                };
                
                window.addEventListener('resize', resizeCanvas);
                resizeCanvas();
            }
            
            // åŸå§‹éœ€æ±‚å‡½æ•¸
            originalDemandFunction(quantity) {
                return 15 - 0.05 * quantity;
            }
            
            // æ–°éœ€æ±‚å‡½æ•¸
            demandFunction(quantity) {
                return 15 - 0.05 * quantity + this.demandShift;
            }
            
            // åŸå§‹ä¾›çµ¦å‡½æ•¸
            originalSupplyFunction(quantity) {
                return 5 + 0.05 * quantity;
            }
            
            // æ–°ä¾›çµ¦å‡½æ•¸
            supplyFunction(quantity) {
                return 5 + 0.05 * quantity + this.supplyShift;
            }
            
            // è¨ˆç®—åŸå§‹å‡è¡¡é»
            calculateOriginalEquilibrium() {
                const equilibriumQuantity = 100;
                const equilibriumPrice = 10;
                return { quantity: equilibriumQuantity, price: equilibriumPrice };
            }
            
            // è¨ˆç®—æ–°å‡è¡¡é»
            calculateNewEquilibrium() {
                // æ±‚è§£ï¼š15 - 0.05 * Q + demandShift = 5 + 0.05 * Q + supplyShift
                // 0.1 * Q = 10 + demandShift - supplyShift
                const equilibriumQuantity = (10 + this.demandShift - this.supplyShift) / 0.1;
                const equilibriumPrice = this.demandFunction(equilibriumQuantity);
                
                return { quantity: equilibriumQuantity, price: equilibriumPrice };
            }
            
            // åº§æ¨™è½‰æ›
            toCanvasX(quantity) {
                return this.margin + (quantity / 200) * this.chartWidth;
            }
            
            toCanvasY(price) {
                return this.height - this.margin - ((price - 0) / 20) * this.chartHeight;
            }
            
            draw() {
                // æ¸…é™¤ç•«å¸ƒ
                this.ctx.clearRect(0, 0, this.width, this.height);
                
                // è¨­å®šé¡è‰²ï¼ˆæ ¹æ“šæ·±è‰²æ¨¡å¼ï¼‰
                const isDark = document.documentElement.classList.contains('dark');
                const textColor = isDark ? '#e2e8f0' : '#374151';
                const gridColor = isDark ? '#4a5568' : '#d1d5db';
                const axisColor = isDark ? '#718096' : '#6b7280';
                
                // ç¹ªè£½åº§æ¨™è»¸
                this.drawAxes(textColor, axisColor);
                
                // ç¹ªè£½æ ¼ç·š
                this.drawGrid(gridColor);
                
                // ç¹ªè£½æ›²ç·š
                this.drawDemandCurve();
                this.drawSupplyCurve();
                
                // ç¹ªè£½å‡è¡¡é»
                this.drawEquilibrium();
                
                // æ›´æ–°æ•¸å€¼é¡¯ç¤º
                this.updateDisplay();
            }
            
            drawAxes(textColor, axisColor) {
                this.ctx.strokeStyle = axisColor;
                this.ctx.lineWidth = 2;
                this.ctx.font = '14px Noto Sans TC';
                this.ctx.fillStyle = textColor;
                
                // Xè»¸
                this.ctx.beginPath();
                this.ctx.moveTo(this.margin, this.height - this.margin);
                this.ctx.lineTo(this.width - this.margin, this.height - this.margin);
                this.ctx.stroke();
                
                // Yè»¸
                this.ctx.beginPath();
                this.ctx.moveTo(this.margin, this.margin);
                this.ctx.lineTo(this.margin, this.height - this.margin);
                this.ctx.stroke();
                
                // è»¸æ¨™ç±¤ - æ ¹æ“šç•¶å‰èªè¨€é¡¯ç¤º
                const t = translations[currentLang];
                this.ctx.textAlign = 'center';
                this.ctx.fillText(t.axisLabels.quantity, this.width - this.margin - 20, this.height - 20);
                
                this.ctx.textAlign = 'left';
                this.ctx.fillText(t.axisLabels.price, 15, 25);
            }
            
            drawGrid(gridColor) {
                this.ctx.strokeStyle = gridColor;
                this.ctx.lineWidth = 0.3;
                
                // å‚ç›´ç·š
                for (let q = 0; q <= 200; q += 50) {
                    const x = this.toCanvasX(q);
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, this.margin);
                    this.ctx.lineTo(x, this.height - this.margin);
                    this.ctx.stroke();
                }
                
                // æ°´å¹³ç·š
                for (let p = 0; p <= 20; p += 5) {
                    const y = this.toCanvasY(p);
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.margin, y);
                    this.ctx.lineTo(this.width - this.margin, y);
                    this.ctx.stroke();
                }
            }
            
            drawDemandCurve() {
                // åŸå§‹éœ€æ±‚æ›²ç·š Dâ‚
                this.ctx.strokeStyle = '#3b82f6';
                this.ctx.lineWidth = 2;
                this.ctx.beginPath();
                
                for (let q = 0; q <= 300; q += 1) {
                    const price = this.originalDemandFunction(q);
                    if (price < 0) continue;
                    
                    const x = this.toCanvasX(q);
                    const y = this.toCanvasY(price);
                    
                    if (q === 0) {
                        this.ctx.moveTo(x, y);
                    } else {
                        this.ctx.lineTo(x, y);
                    }
                }
                
                this.ctx.stroke();
                
                // æ–°éœ€æ±‚æ›²ç·š Dâ‚‚
                if (this.demandShift !== 0) {
                    this.ctx.strokeStyle = '#1d4ed8';
                    this.ctx.lineWidth = 3;
                    this.ctx.beginPath();
                    
                    for (let q = 0; q <= 300; q += 1) {
                        const price = this.demandFunction(q);
                        if (price < 0) continue;
                        
                        const x = this.toCanvasX(q);
                        const y = this.toCanvasY(price);
                        
                        if (q === 0) {
                            this.ctx.moveTo(x, y);
                        } else {
                            this.ctx.lineTo(x, y);
                        }
                    }
                    
                    this.ctx.stroke();
                    
                    // ç¹ªè£½ Dâ‚ åˆ° Dâ‚‚ çš„ç§»å‹•ç®­é ­
                    this.drawDemandShiftArrow();
                }
                
                // æ¨™ç±¤
                this.ctx.font = 'bold 16px Noto Sans TC';
                
                // Dâ‚ æ¨™ç±¤
                const d1EndQ = 200;
                const d1EndPrice = this.originalDemandFunction(d1EndQ);
                if (d1EndPrice > 0) {
                    const d1EndX = this.toCanvasX(d1EndQ);
                    const d1EndY = this.toCanvasY(d1EndPrice);
                    
                    this.ctx.fillStyle = '#3b82f6';
                    this.ctx.fillText('Dâ‚', d1EndX + 10, d1EndY + 5);
                }
                
                // Dâ‚‚ æ¨™ç±¤
                if (this.demandShift !== 0) {
                    const d2EndQ = 200;
                    const d2EndPrice = this.demandFunction(d2EndQ);
                    if (d2EndPrice > 0) {
                        const d2EndX = this.toCanvasX(d2EndQ);
                        const d2EndY = this.toCanvasY(d2EndPrice);
                        
                        this.ctx.fillStyle = '#1d4ed8';
                        this.ctx.fillText('Dâ‚‚', d2EndX + 10, d2EndY + 5);
                    }
                }
            }
            
            drawSupplyCurve() {
                // åŸå§‹ä¾›çµ¦æ›²ç·š Sâ‚
                this.ctx.strokeStyle = '#ef4444';
                this.ctx.lineWidth = 2;
                this.ctx.beginPath();
                
                for (let q = 0; q <= 300; q += 1) {
                    const price = this.originalSupplyFunction(q);
                    if (price > 20) continue;
                    
                    const x = this.toCanvasX(q);
                    const y = this.toCanvasY(price);
                    
                    if (q === 0) {
                        this.ctx.moveTo(x, y);
                    } else {
                        this.ctx.lineTo(x, y);
                    }
                }
                
                this.ctx.stroke();
                
                // æ–°ä¾›çµ¦æ›²ç·š Sâ‚‚
                if (this.supplyShift !== 0) {
                    this.ctx.strokeStyle = '#dc2626';
                    this.ctx.lineWidth = 3;
                    this.ctx.beginPath();
                    
                    for (let q = 0; q <= 300; q += 1) {
                        const price = this.supplyFunction(q);
                        if (price > 20 || price < 0) continue;
                        
                        const x = this.toCanvasX(q);
                        const y = this.toCanvasY(price);
                        
                        if (q === 0) {
                            this.ctx.moveTo(x, y);
                        } else {
                            this.ctx.lineTo(x, y);
                        }
                    }
                    
                    this.ctx.stroke();
                    
                    // ç¹ªè£½ Sâ‚ åˆ° Sâ‚‚ çš„ç§»å‹•ç®­é ­
                    this.drawSupplyShiftArrow();
                }
                
                // æ¨™ç±¤
                this.ctx.font = 'bold 16px Noto Sans TC';
                
                // Sâ‚ æ¨™ç±¤
                const s1EndQ = 200;
                const s1EndPrice = this.originalSupplyFunction(s1EndQ);
                if (s1EndPrice <= 20) {
                    const s1EndX = this.toCanvasX(s1EndQ);
                    const s1EndY = this.toCanvasY(s1EndPrice);
                    
                    this.ctx.fillStyle = '#ef4444';
                    this.ctx.fillText('Sâ‚', s1EndX + 10, s1EndY - 8);
                }
                
                // Sâ‚‚ æ¨™ç±¤
                if (this.supplyShift !== 0) {
                    const s2EndQ = 200;
                    const s2EndPrice = this.supplyFunction(s2EndQ);
                    if (s2EndPrice <= 20 && s2EndPrice > 0) {
                        const s2EndX = this.toCanvasX(s2EndQ);
                        const s2EndY = this.toCanvasY(s2EndPrice);
                        
                        this.ctx.fillStyle = '#dc2626';
                        this.ctx.fillText('Sâ‚‚', s2EndX + 10, s2EndY - 8);
                    }
                }
            }
            
            drawEquilibrium() {
                const originalEq = this.calculateOriginalEquilibrium();
                const originalX = this.toCanvasX(originalEq.quantity);
                const originalY = this.toCanvasY(originalEq.price);
                
                // åŸå§‹å‡è¡¡é»è™›ç·š
                this.ctx.strokeStyle = '#9ca3af';
                this.ctx.lineWidth = 1;
                this.ctx.setLineDash([4, 4]);
                
                this.ctx.beginPath();
                this.ctx.moveTo(this.margin, originalY);
                this.ctx.lineTo(originalX, originalY);
                this.ctx.stroke();
                
                this.ctx.beginPath();
                this.ctx.moveTo(originalX, originalY);
                this.ctx.lineTo(originalX, this.height - this.margin);
                this.ctx.stroke();
                
                this.ctx.setLineDash([]);
                
                // åŸå§‹å‡è¡¡é»
                this.ctx.fillStyle = '#6b7280';
                this.ctx.strokeStyle = '#374151';
                this.ctx.lineWidth = 3;
                this.ctx.beginPath();
                this.ctx.arc(originalX, originalY, 7, 0, 2 * Math.PI);
                this.ctx.fill();
                this.ctx.stroke();
                
                // æ¨™ç±¤
                this.ctx.font = 'bold 14px Noto Sans TC';
                this.ctx.fillStyle = '#9ca3af';
                this.ctx.fillText('Pâ‚', this.margin - 25, originalY + 4);
                this.ctx.fillText('Qâ‚', originalX - 8, this.height - this.margin + 20);
                
                // æ–°å‡è¡¡é»
                if (this.demandShift !== 0 || this.supplyShift !== 0) {
                    const newEq = this.calculateNewEquilibrium();
                    const newX = this.toCanvasX(newEq.quantity);
                    const newY = this.toCanvasY(newEq.price);
                    
                    // æ–°å‡è¡¡é»è™›ç·š
                    this.ctx.strokeStyle = '#7c3aed';
                    this.ctx.lineWidth = 2;
                    this.ctx.setLineDash([6, 3]);
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.margin, newY);
                    this.ctx.lineTo(newX, newY);
                    this.ctx.stroke();
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(newX, newY);
                    this.ctx.lineTo(newX, this.height - this.margin);
                    this.ctx.stroke();
                    
                    this.ctx.setLineDash([]);
                    
                    // æ–°å‡è¡¡é»
                    this.ctx.fillStyle = '#7c3aed';
                    this.ctx.strokeStyle = '#6d28d9';
                    this.ctx.lineWidth = 3;
                    this.ctx.beginPath();
                    this.ctx.arc(newX, newY, 7, 0, 2 * Math.PI);
                    this.ctx.fill();
                    this.ctx.stroke();
                    
                    // æ¨™ç±¤
                    this.ctx.fillStyle = '#7c3aed';
                    this.ctx.fillText('Pâ‚‚', this.margin - 25, newY + 4);
                    this.ctx.fillText('Qâ‚‚', newX - 8, this.height - this.margin + 20);
                    
                    // ç¹ªè£½ç®­é ­
                    this.drawArrows(originalEq, newEq, originalX, originalY, newX, newY);
                }
            }
            
            drawArrows(originalEq, newEq, originalX, originalY, newX, newY) {
                this.ctx.strokeStyle = '#f97316';
                this.ctx.fillStyle = '#f97316';
                this.ctx.lineWidth = 3;
                
                // P1 åˆ° P2 çš„ç®­é ­
                if (Math.abs(newY - originalY) > 5) {
                    this.drawArrow(this.margin - 45, originalY, this.margin - 45, newY);
                }
                
                // Q1 åˆ° Q2 çš„ç®­é ­
                if (Math.abs(newX - originalX) > 5) {
                    this.drawArrow(originalX, this.height - this.margin + 35, newX, this.height - this.margin + 35);
                }
            }
            
            drawArrow(startX, startY, endX, endY) {
                const headlen = 12;
                const angle = Math.atan2(endY - startY, endX - startX);
                
                this.ctx.beginPath();
                this.ctx.moveTo(startX, startY);
                this.ctx.lineTo(endX, endY);
                this.ctx.stroke();
                
                this.ctx.beginPath();
                this.ctx.moveTo(endX, endY);
                this.ctx.lineTo(endX - headlen * Math.cos(angle - Math.PI / 6), endY - headlen * Math.sin(angle - Math.PI / 6));
                this.ctx.lineTo(endX - headlen * Math.cos(angle + Math.PI / 6), endY - headlen * Math.sin(angle + Math.PI / 6));
                this.ctx.closePath();
                this.ctx.fill();
                this.ctx.stroke();
            }
            
            // ç¹ªè£½éœ€æ±‚æ›²ç·šç§»å‹•ç®­é ­
            drawDemandShiftArrow() {
                const arrowQ = 80; // ç®­é ­ä½ç½®
                const d1ArrowPrice = this.originalDemandFunction(arrowQ);
                const d2ArrowPrice = this.demandFunction(arrowQ);
                
                const d1ArrowX = this.toCanvasX(arrowQ);
                const d2ArrowX = this.toCanvasX(arrowQ);
                const d1ArrowY = this.toCanvasY(d1ArrowPrice);
                const d2ArrowY = this.toCanvasY(d2ArrowPrice);
                
                // è¨­å®šç®­é ­é¡è‰²ç‚ºæ©™è‰²
                this.ctx.strokeStyle = '#f97316';
                this.ctx.fillStyle = '#f97316';
                this.ctx.lineWidth = 3;
                
                // è¨ˆç®—æ°´å¹³ç®­é ­ä½ç½® (åœ¨å…©æ¢æ›²ç·šä¹‹é–“çš„ä¸­é»)
                const arrowY = (d1ArrowY + d2ArrowY) / 2;
                const arrowLength = 40;
                
                // ç¹ªè£½æ°´å¹³ç®­é ­
                if (this.demandShift > 0) {
                    // éœ€æ±‚ä¸Šå‡ï¼šæ°´å¹³å‘å³ç®­é ­
                    const startX = d1ArrowX - arrowLength / 2;
                    const endX = d1ArrowX + arrowLength / 2;
                    this.drawArrow(startX, arrowY, endX, arrowY);
                } else {
                    // éœ€æ±‚ä¸‹é™ï¼šæ°´å¹³å‘å·¦ç®­é ­
                    const startX = d1ArrowX + arrowLength / 2;
                    const endX = d1ArrowX - arrowLength / 2;
                    this.drawArrow(startX, arrowY, endX, arrowY);
                }
            }
            
            // ç¹ªè£½ä¾›çµ¦æ›²ç·šç§»å‹•ç®­é ­
            drawSupplyShiftArrow() {
                const arrowQ = 120; // ç®­é ­ä½ç½®
                const s1ArrowPrice = this.originalSupplyFunction(arrowQ);
                const s2ArrowPrice = this.supplyFunction(arrowQ);
                
                const s1ArrowX = this.toCanvasX(arrowQ);
                const s2ArrowX = this.toCanvasX(arrowQ);
                const s1ArrowY = this.toCanvasY(s1ArrowPrice);
                const s2ArrowY = this.toCanvasY(s2ArrowPrice);
                
                // è¨­å®šç®­é ­é¡è‰²ç‚ºæ©™è‰²
                this.ctx.strokeStyle = '#f97316';
                this.ctx.fillStyle = '#f97316';
                this.ctx.lineWidth = 3;
                
                // è¨ˆç®—æ°´å¹³ç®­é ­ä½ç½® (åœ¨å…©æ¢æ›²ç·šä¹‹é–“çš„ä¸­é»)
                const arrowY = (s1ArrowY + s2ArrowY) / 2;
                const arrowLength = 40;
                
                // ç¹ªè£½æ°´å¹³ç®­é ­
                if (this.supplyShift < 0) {
                    // ä¾›çµ¦ä¸Šå‡ï¼šæ°´å¹³å‘å³ç®­é ­
                    const startX = s1ArrowX - arrowLength / 2;
                    const endX = s1ArrowX + arrowLength / 2;
                    this.drawArrow(startX, arrowY, endX, arrowY);
                } else {
                    // ä¾›çµ¦ä¸‹é™ï¼šæ°´å¹³å‘å·¦ç®­é ­
                    const startX = s1ArrowX + arrowLength / 2;
                    const endX = s1ArrowX - arrowLength / 2;
                    this.drawArrow(startX, arrowY, endX, arrowY);
                }
            }
            
            updateDisplay() {
                const newEq = this.calculateNewEquilibrium();
                const newEquilibriumElement = document.getElementById('newEquilibrium');
                if (newEquilibriumElement) {
                    newEquilibriumElement.innerHTML = `
                        <span class="text-gray-600 dark:text-gray-400">æ–°å‡è¡¡ï¼š</span>
                        <span class="font-mono">Pâ‚‚=${newEq.price.toFixed(1)}, Qâ‚‚=${newEq.quantity.toFixed(0)}</span>
                    `;
                }
            }
            
            // éœ€æ±‚å’Œä¾›çµ¦èª¿æ•´æ–¹æ³•
            increaseDemand() {
                this.demandShift += 3;
                this.animateDraw();
            }
            
            decreaseDemand() {
                this.demandShift -= 3;
                this.animateDraw();
            }
            
            resetDemand() {
                this.demandShift = 0;
                this.animateDraw();
            }
            
            increaseSupply() {
                this.supplyShift -= 3;
                this.animateDraw();
            }
            
            decreaseSupply() {
                this.supplyShift += 3;
                this.animateDraw();
            }
            
            resetSupply() {
                this.supplyShift = 0;
                this.animateDraw();
            }
            
            resetAll() {
                this.demandShift = 0;
                this.supplyShift = 0;
                this.animateDraw();
            }
            
            animateDraw() {
                this.canvas.style.transform += ' scale(1.02)';
                setTimeout(() => {
                    this.canvas.style.transform = this.canvas.style.transform.replace(' scale(1.02)', '');
                    this.draw();
                }, 100);
                
                this.draw();
            }
            
            // æ‹–æ‹½äº¤äº’
            setupInteractionListeners() {
                this.canvas.addEventListener('mousedown', (e) => this.handleStart(e));
                this.canvas.addEventListener('mousemove', (e) => this.handleMove(e));
                this.canvas.addEventListener('mouseup', (e) => this.handleEnd(e));
                this.canvas.addEventListener('mouseleave', (e) => this.handleEnd(e));
                
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.handleStart(e.touches[0]);
                });
                this.canvas.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    this.handleMove(e.touches[0]);
                });
                this.canvas.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.handleEnd(e);
                });
                
                this.canvas.addEventListener('mousemove', (e) => {
                    if (!this.isDragging) {
                        this.updateCursor(e);
                    }
                });
            }
            
            getEventPos(e) {
                const rect = this.canvas.getBoundingClientRect();
                const scaleX = this.canvas.width / rect.width;
                const scaleY = this.canvas.height / rect.height;
                
                return {
                    x: (e.clientX - rect.left) * scaleX,
                    y: (e.clientY - rect.top) * scaleY
                };
            }
            
            getNearCurve(pos) {
                if (pos.x < this.margin || pos.x > this.width - this.margin) return null;
                if (pos.y < this.margin || pos.y > this.height - this.margin) return null;
                
                const tolerance = 15;
                const quantity = ((pos.x - this.margin) / this.chartWidth) * 200;
                const price = ((this.height - this.margin - pos.y) / this.chartHeight) * 20;
                
                // æª¢æŸ¥éœ€æ±‚æ›²ç·š
                if (this.demandShift !== 0) {
                    const demandPrice = this.demandFunction(quantity);
                    if (Math.abs(price - demandPrice) < tolerance * (20 / this.chartHeight)) {
                        return 'demand';
                    }
                }
                
                // æª¢æŸ¥ä¾›çµ¦æ›²ç·š
                if (this.supplyShift !== 0) {
                    const supplyPrice = this.supplyFunction(quantity);
                    if (Math.abs(price - supplyPrice) < tolerance * (20 / this.chartHeight)) {
                        return 'supply';
                    }
                }
                
                return null;
            }
            
            handleStart(e) {
                const pos = this.getEventPos(e);
                const nearCurve = this.getNearCurve(pos);
                
                if (nearCurve) {
                    this.isDragging = true;
                    this.dragCurveType = nearCurve;
                    this.dragStartY = pos.y;
                    
                    if (nearCurve === 'demand') {
                        this.initialShift = this.demandShift;
                    } else {
                        this.initialShift = this.supplyShift;
                    }
                    
                    this.canvas.style.cursor = 'grabbing';
                }
            }
            
            handleMove(e) {
                const pos = this.getEventPos(e);
                
                if (this.isDragging && this.dragCurveType) {
                    const deltaY = this.dragStartY - pos.y;
                    const priceChange = (deltaY / this.chartHeight) * 20;
                    
                    if (this.dragCurveType === 'demand') {
                        this.demandShift = Math.max(-10, Math.min(10, this.initialShift + priceChange));
                    } else {
                        this.supplyShift = Math.max(-10, Math.min(10, this.initialShift + priceChange));
                    }
                    
                    this.draw();
                }
            }
            
            handleEnd(e) {
                if (this.isDragging) {
                    this.isDragging = false;
                    this.dragCurveType = null;
                    this.canvas.style.cursor = 'default';
                }
            }
            
            updateCursor(e) {
                const pos = this.getEventPos(e);
                const nearCurve = this.getNearCurve(pos);
                
                if (nearCurve) {
                    this.canvas.style.cursor = 'grab';
                } else {
                    this.canvas.style.cursor = 'default';
                }
            }
        }

        // èªè¨€ç¿»è­¯å…§å®¹
        const translations = {
            zh: {
                mainTitle: "ä¾›éœ€å‡è¡¡äº’å‹•æ•™å­¸",
                mainSubtitle: "è§€å¯Ÿéœ€æ±‚å’Œä¾›çµ¦åŒæ™‚è®ŠåŒ–å°å‡è¡¡åƒ¹æ ¼å’Œæ•¸é‡çš„å½±éŸ¿",
                controlPanel: "æ§åˆ¶é¢æ¿",
                demandAdjustment: "ğŸ“ˆ éœ€æ±‚æ›²ç·šèª¿æ•´",
                increaseDemand: "éœ€æ±‚ä¸Šå‡ â†—ï¸",
                decreaseDemand: "éœ€æ±‚ä¸‹é™ â†˜ï¸",
                resetDemand: "é‡è¨­éœ€æ±‚ ğŸ”„",
                supplyAdjustment: "ğŸ“Š ä¾›çµ¦æ›²ç·šèª¿æ•´",
                increaseSupply: "ä¾›çµ¦ä¸Šå‡ â†—ï¸",
                decreaseSupply: "ä¾›çµ¦ä¸‹é™ â†˜ï¸",
                resetSupply: "é‡è¨­ä¾›çµ¦ ğŸ”„",
                combinedAdjustment: "ğŸ”„ çµ„åˆèª¿æ•´",
                resetAll: "å…¨éƒ¨é‡è¨­ â†º",
                chartTitle: "ä¾›éœ€å‡è¡¡åœ–",
                quizTitle: "ğŸ“ äº’å‹•æ¸¬é©—",
                conceptsTitle: "ç¶“æ¿Ÿå­¸æ¦‚å¿µèªªæ˜",
                interactiveFeatures: "ğŸ“± äº’å‹•åŠŸèƒ½",
                interactiveDescription: "",
                demandEffects: "éœ€æ±‚è®ŠåŒ–çš„å½±éŸ¿ï¼š",
                demandIncrease: "éœ€æ±‚ä¸Šå‡ï¼šæ›²ç·šå³ç§»ï¼Œåƒ¹æ ¼â†‘ï¼Œæ•¸é‡â†‘",
                demandDecrease: "éœ€æ±‚ä¸‹é™ï¼šæ›²ç·šå·¦ç§»ï¼Œåƒ¹æ ¼â†“ï¼Œæ•¸é‡â†“",
                supplyEffects: "ä¾›çµ¦è®ŠåŒ–çš„å½±éŸ¿ï¼š",
                supplyIncrease: "ä¾›çµ¦ä¸Šå‡ï¼šæ›²ç·šå³ç§»ï¼Œåƒ¹æ ¼â†“ï¼Œæ•¸é‡â†‘",
                supplyDecrease: "ä¾›çµ¦ä¸‹é™ï¼šæ›²ç·šå·¦ç§»ï¼Œåƒ¹æ ¼â†‘ï¼Œæ•¸é‡â†“",
                simultaneousEffects: "åŒæ™‚è®ŠåŒ–çš„å½±éŸ¿ï¼š",
                quantityEffect: "æ•¸é‡ï¼šåŒå‘è®ŠåŒ–æ™‚ç¢ºå®šï¼Œåå‘æ™‚ä¸ç¢ºå®š",
                priceEffect: "åƒ¹æ ¼ï¼šåå‘è®ŠåŒ–æ™‚ç¢ºå®šï¼ŒåŒå‘æ™‚ä¸ç¢ºå®š",
                axisLabels: {
                    quantity: "æ•¸é‡ (Quantity)",
                    price: "åƒ¹æ ¼ (Price)"
                },
                questions: {
                    q1: {
                        title: "å•é¡Œ 1ï¼šç•¶éœ€æ±‚ä¸Šå‡å’Œä¾›çµ¦åŒæ™‚ä¸Šå‡æ™‚ï¼Œå‡è¡¡æ•¸é‡æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ",
                        options: {
                            A: "A. å¿…å®šå¢åŠ ",
                            B: "B. å¿…å®šæ¸›å°‘", 
                            C: "C. ä¸è®Š",
                            D: "D. ç„¡æ³•ç¢ºå®š"
                        },
                        correct: "æ­£ç¢ºï¼",
                        wrong: "éŒ¯èª¤ã€‚",
                        explanation: {
                            correct: "ç•¶éœ€æ±‚å’Œä¾›çµ¦åŒæ™‚ä¸Šå‡æ™‚ï¼Œå…©è€…éƒ½æ¨å‹•æ•¸é‡å¢åŠ ï¼Œå› æ­¤å‡è¡¡æ•¸é‡å¿…å®šå¢åŠ ã€‚",
                            wrong: "éœ€æ±‚ä¸Šå‡å’Œä¾›çµ¦ä¸Šå‡éƒ½æœƒå¢åŠ å‡è¡¡æ•¸é‡ï¼Œå› æ­¤æ•¸é‡å¿…å®šå¢åŠ ã€‚"
                        }
                    },
                    q2: {
                        title: "å•é¡Œ 2ï¼šç•¶éœ€æ±‚ä¸‹é™å’Œä¾›çµ¦åŒæ™‚ä¸‹é™æ™‚ï¼Œå‡è¡¡åƒ¹æ ¼æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ",
                        options: {
                            A: "A. å¿…å®šä¸Šå‡",
                            B: "B. å¿…å®šä¸‹é™",
                            C: "C. ä¸è®Š",
                            D: "D. ç„¡æ³•ç¢ºå®š"
                        },
                        correct: "æ­£ç¢ºï¼",
                        wrong: "éŒ¯èª¤ã€‚",
                        explanation: {
                            correct: "éœ€æ±‚ä¸‹é™ä½¿åƒ¹æ ¼ä¸‹é™ï¼Œä¾›çµ¦ä¸‹é™ä½¿åƒ¹æ ¼ä¸Šå‡ï¼Œå…©å€‹æ•ˆæ‡‰ç›¸åï¼Œæœ€çµ‚åƒ¹æ ¼è®ŠåŒ–ç„¡æ³•ç¢ºå®šï¼Œå–æ±ºæ–¼å“ªå€‹æ•ˆæ‡‰æ›´å¼·ã€‚",
                            wrong: "éœ€æ±‚ä¸‹é™å’Œä¾›çµ¦ä¸‹é™å°åƒ¹æ ¼çš„å½±éŸ¿ç›¸åï¼Œå› æ­¤åƒ¹æ ¼è®ŠåŒ–ç„¡æ³•ç¢ºå®šã€‚"
                        }
                    },
                    q3: {
                        title: "å•é¡Œ 3ï¼šç•¶éœ€æ±‚ä¸Šå‡ç¨‹åº¦å¤§æ–¼ä¾›çµ¦ä¸Šå‡ç¨‹åº¦æ™‚ï¼Œå‡è¡¡åƒ¹æ ¼æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ",
                        options: {
                            A: "A. ä¸Šå‡",
                            B: "B. ä¸‹é™",
                            C: "C. ä¸è®Š",
                            D: "D. ç„¡æ³•ç¢ºå®š"
                        },
                        correct: "æ­£ç¢ºï¼",
                        wrong: "éŒ¯èª¤ã€‚",
                        explanation: {
                            correct: "éœ€æ±‚ä¸Šå‡æ¨é«˜åƒ¹æ ¼ï¼Œä¾›çµ¦ä¸Šå‡å£“ä½åƒ¹æ ¼ã€‚ç•¶éœ€æ±‚ä¸Šå‡ç¨‹åº¦å¤§æ–¼ä¾›çµ¦ä¸Šå‡æ™‚ï¼Œæ¨é«˜åƒ¹æ ¼çš„åŠ›é‡æ›´å¼·ï¼Œå‡è¡¡åƒ¹æ ¼ä¸Šå‡ã€‚",
                            wrong: "ç•¶éœ€æ±‚ä¸Šå‡ç¨‹åº¦å¤§æ–¼ä¾›çµ¦ä¸Šå‡æ™‚ï¼Œæ¨é«˜åƒ¹æ ¼çš„æ•ˆæ‡‰ä½”ä¸»å°åœ°ä½ï¼Œå‡è¡¡åƒ¹æ ¼æœƒä¸Šå‡ã€‚"
                        }
                    },
                    q4: {
                        title: "å•é¡Œ 4ï¼šç•¶éœ€æ±‚ä¸Šå‡å’Œä¾›çµ¦åŒæ™‚ä¸‹é™æ™‚ï¼Œå‡è¡¡åƒ¹æ ¼æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ",
                        options: {
                            A: "A. å¿…å®šä¸Šå‡",
                            B: "B. å¿…å®šä¸‹é™",
                            C: "C. ä¸è®Š",
                            D: "D. ç„¡æ³•ç¢ºå®š"
                        },
                        correct: "æ­£ç¢ºï¼",
                        wrong: "éŒ¯èª¤ã€‚",
                        explanation: {
                            correct: "ç•¶éœ€æ±‚ä¸Šå‡å’Œä¾›çµ¦ä¸‹é™æ™‚ï¼Œå…©å€‹æ•ˆæ‡‰éƒ½æ¨é«˜åƒ¹æ ¼ï¼Œå› æ­¤å‡è¡¡åƒ¹æ ¼å¿…å®šä¸Šå‡ã€‚éœ€æ±‚ä¸Šå‡ä½¿åƒ¹æ ¼ä¸Šå‡ï¼Œä¾›çµ¦ä¸‹é™ä¹Ÿä½¿åƒ¹æ ¼ä¸Šå‡ã€‚",
                            wrong: "éœ€æ±‚ä¸Šå‡å’Œä¾›çµ¦ä¸‹é™éƒ½æœƒæ¨é«˜åƒ¹æ ¼ï¼Œå…©å€‹æ•ˆæ‡‰åŒå‘ï¼Œå› æ­¤å‡è¡¡åƒ¹æ ¼å¿…å®šä¸Šå‡ã€‚"
                        }
                    },
                    q5: {
                        title: "å•é¡Œ 5ï¼šç•¶éœ€æ±‚ä¸‹é™å¹…åº¦ç­‰æ–¼ä¾›çµ¦ä¸Šå‡å¹…åº¦æ™‚ï¼Œå‡è¡¡åƒ¹æ ¼æœƒå¦‚ä½•æ”¹è®Šï¼Ÿ",
                        options: {
                            A: "A. å¿…å®šä¸Šå‡",
                            B: "B. å¿…å®šä¸‹é™",
                            C: "C. ä¸è®Š",
                            D: "D. ç„¡æ³•ç¢ºå®š"
                        },
                        correct: "æ­£ç¢ºï¼",
                        wrong: "éŒ¯èª¤ã€‚",
                        explanation: {
                            correct: "ç•¶éœ€æ±‚ä¸‹é™å’Œä¾›çµ¦ä¸Šå‡æ™‚ï¼Œå…©å€‹æ•ˆæ‡‰éƒ½æ¨ä½åƒ¹æ ¼ã€‚å³ä½¿å¹…åº¦ç›¸ç­‰ï¼Œåƒ¹æ ¼ä»æœƒä¸‹é™ï¼Œå› ç‚ºå…©å€‹åŠ›é‡éƒ½å‘åŒä¸€æ–¹å‘ä½œç”¨ã€‚",
                            wrong: "éœ€æ±‚ä¸‹é™ä½¿åƒ¹æ ¼ä¸‹é™ï¼Œä¾›çµ¦ä¸Šå‡ä¹Ÿä½¿åƒ¹æ ¼ä¸‹é™ã€‚å…©å€‹æ•ˆæ‡‰åŒå‘ä½œç”¨ï¼Œå‡è¡¡åƒ¹æ ¼å¿…å®šä¸‹é™ã€‚"
                        }
                    }
                }
            },
            en: {
                mainTitle: "Supply and Demand Equilibrium Interactive Learning",
                mainSubtitle: "Observe the effects of simultaneous changes in demand and supply on equilibrium price and quantity",
                controlPanel: "Control Panel",
                demandAdjustment: "ğŸ“ˆ Demand Curve Adjustment",
                increaseDemand: "Increase Demand â†—ï¸",
                decreaseDemand: "Decrease Demand â†˜ï¸",
                resetDemand: "Reset Demand ğŸ”„",
                supplyAdjustment: "ğŸ“Š Supply Curve Adjustment",
                increaseSupply: "Increase Supply â†—ï¸",
                decreaseSupply: "Decrease Supply â†˜ï¸",
                resetSupply: "Reset Supply ğŸ”„",
                combinedAdjustment: "ğŸ”„ Combined Adjustment",
                resetAll: "Reset All â†º",
                chartTitle: "Supply and Demand Equilibrium Chart",
                quizTitle: "ğŸ“ Interactive Quiz",
                conceptsTitle: "Economic Concepts Explanation",
                interactiveFeatures: "ğŸ“± Interactive Features",
                interactiveDescription: "",
                demandEffects: "Effects of Demand Changes:",
                demandIncrease: "Demand Increase: Curve shifts right, Priceâ†‘, Quantityâ†‘",
                demandDecrease: "Demand Decrease: Curve shifts left, Priceâ†“, Quantityâ†“",
                supplyEffects: "Effects of Supply Changes:",
                supplyIncrease: "Supply Increase: Curve shifts right, Priceâ†“, Quantityâ†‘",
                supplyDecrease: "Supply Decrease: Curve shifts left, Priceâ†‘, Quantityâ†“",
                simultaneousEffects: "Effects of Simultaneous Changes:",
                quantityEffect: "Quantity: Determinant when same direction, indeterminate when opposite",
                priceEffect: "Price: Determinant when opposite direction, indeterminate when same",
                axisLabels: {
                    quantity: "Quantity",
                    price: "Price"
                },
                questions: {
                    q1: {
                        title: "Question 1: When demand increases and supply increases simultaneously, how will equilibrium quantity change?",
                        options: {
                            A: "A. Must increase",
                            B: "B. Must decrease",
                            C: "C. Unchanged",
                            D: "D. Cannot determine"
                        },
                        correct: "Correct!",
                        wrong: "Incorrect.",
                        explanation: {
                            correct: "When both demand and supply increase simultaneously, both forces push quantity upward, so equilibrium quantity must increase.",
                            wrong: "Both demand increase and supply increase will raise equilibrium quantity, so quantity must increase."
                        }
                    },
                    q2: {
                        title: "Question 2: When demand decreases and supply decreases simultaneously, how will equilibrium price change?",
                        options: {
                            A: "A. Must increase",
                            B: "B. Must decrease",
                            C: "C. Unchanged",
                            D: "D. Cannot determine"
                        },
                        correct: "Correct!",
                        wrong: "Incorrect.",
                        explanation: {
                            correct: "Demand decrease lowers price while supply decrease raises price. These opposite effects make the final price change indeterminate, depending on which effect is stronger.",
                            wrong: "Demand decrease and supply decrease have opposite effects on price, so price change cannot be determined."
                        }
                    },
                    q3: {
                        title: "Question 3: When demand increase is greater than supply increase, how will equilibrium price change?",
                        options: {
                            A: "A. Rise",
                            B: "B. Fall",
                            C: "C. Unchanged", 
                            D: "D. Cannot determine"
                        },
                        correct: "Correct!",
                        wrong: "Incorrect.",
                        explanation: {
                            correct: "Demand increase pushes price up while supply increase pushes price down. When demand increase is greater, the upward pressure dominates and equilibrium price rises.",
                            wrong: "When demand increase exceeds supply increase, the price-raising effect dominates and equilibrium price will rise."
                        }
                    },
                    q4: {
                        title: "Question 4: When demand increases and supply decreases simultaneously, how will equilibrium price change?",
                        options: {
                            A: "A. Must increase",
                            B: "B. Must decrease",
                            C: "C. Unchanged",
                            D: "D. Cannot determine"
                        },
                        correct: "Correct!",
                        wrong: "Incorrect.",
                        explanation: {
                            correct: "When demand increases and supply decreases, both effects push price upward, so equilibrium price must increase. Demand increase raises price, and supply decrease also raises price.",
                            wrong: "Both demand increase and supply decrease will raise price. These same-direction effects result in a definite price increase."
                        }
                    },
                    q5: {
                        title: "Question 5: When demand decrease equals supply increase in magnitude, how will equilibrium price change?",
                        options: {
                            A: "A. Must increase",
                            B: "B. Must decrease",
                            C: "C. Unchanged",
                            D: "D. Cannot determine"
                        },
                        correct: "Correct!",
                        wrong: "Incorrect.",
                        explanation: {
                            correct: "When demand decreases and supply increases, both effects push price downward. Even with equal magnitudes, price will still fall because both forces work in the same direction.",
                            wrong: "Demand decrease lowers price and supply increase also lowers price. These same-direction effects will definitely decrease equilibrium price."
                        }
                    }
                }
            }
        };

        let currentLang = 'zh';

        // èªè¨€åˆ‡æ›åŠŸèƒ½
        function switchLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            document.getElementById('langCN').className = lang === 'zh' ? 
                'px-4 py-2 text-sm font-medium bg-primary text-white' : 
                'px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700';
            document.getElementById('langEN').className = lang === 'en' ? 
                'px-4 py-2 text-sm font-medium bg-primary text-white' : 
                'px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700';
            
            // æ›´æ–°æ–‡æœ¬å…§å®¹
            updateTexts(t);
            
            // é‡æ–°ç¹ªè£½åœ–è¡¨ï¼ˆæ›´æ–°åæ¨™è»¸æ¨™ç±¤ï¼‰
            if (window.economicsChart) {
                window.economicsChart.draw();
            }
        }

        function updateTexts(t) {
            // åŸºæœ¬å…ƒç´ æ›´æ–°
            document.getElementById('mainTitle').textContent = t.mainTitle;
            document.getElementById('mainSubtitle').textContent = t.mainSubtitle;
            
            // æ§åˆ¶é¢æ¿
            const elements = {
                controlPanel: document.querySelector('.card h2'),
                demandLabel: document.querySelector('label[class*="text-blue-600"]'),
                increaseDemand: document.getElementById('increaseDemand'),
                decreaseDemand: document.getElementById('decreaseDemand'),
                resetDemand: document.getElementById('resetDemand'),
                supplyLabel: document.querySelector('label[class*="text-red-600"]'),
                increaseSupply: document.getElementById('increaseSupply'),
                decreaseSupply: document.getElementById('decreaseSupply'),
                resetSupply: document.getElementById('resetSupply'),
                combinedLabel: document.querySelector('label[class*="text-purple-600"]'),
                resetAll: document.getElementById('resetAll'),
                chartTitle: document.querySelector('.card:nth-child(2) h2'),
                quizTitle: document.querySelector('.mt-8.card h2'),
                conceptsTitle: document.querySelector('.mt-8.card:last-child h2'),
                interactiveTitle: document.querySelector('.font-semibold.text-blue-700'),
                interactiveDesc: document.querySelector('.text-sm.text-blue-600')
            };
            
            if (elements.controlPanel) elements.controlPanel.textContent = t.controlPanel;
            if (elements.demandLabel) elements.demandLabel.textContent = t.demandAdjustment;
            if (elements.increaseDemand) elements.increaseDemand.textContent = t.increaseDemand;
            if (elements.decreaseDemand) elements.decreaseDemand.textContent = t.decreaseDemand;
            if (elements.resetDemand) elements.resetDemand.textContent = t.resetDemand;
            if (elements.supplyLabel) elements.supplyLabel.textContent = t.supplyAdjustment;
            if (elements.increaseSupply) elements.increaseSupply.textContent = t.increaseSupply;
            if (elements.decreaseSupply) elements.decreaseSupply.textContent = t.decreaseSupply;
            if (elements.resetSupply) elements.resetSupply.textContent = t.resetSupply;
            if (elements.combinedLabel) elements.combinedLabel.textContent = t.combinedAdjustment;
            if (elements.resetAll) elements.resetAll.textContent = t.resetAll;
            if (elements.chartTitle) elements.chartTitle.textContent = t.chartTitle;
            if (elements.quizTitle) elements.quizTitle.textContent = t.quizTitle;
            if (elements.conceptsTitle) elements.conceptsTitle.textContent = t.conceptsTitle;
            if (elements.interactiveTitle) elements.interactiveTitle.textContent = t.interactiveFeatures;
            if (elements.interactiveDesc) elements.interactiveDesc.textContent = t.interactiveDescription;
            
            // æ›´æ–°å•é¡Œå’Œé¸é …
            updateQuestions(t);
            
            // æ›´æ–°æ¦‚å¿µèªªæ˜
            updateConcepts(t);
        }

        function updateQuestions(t) {
            // æ›´æ–°å•é¡Œæ¨™é¡Œå’Œé¸é …
            for (let i = 1; i <= 5; i++) {
                // ä½¿ç”¨æ›´ç²¾ç¢ºçš„é¸æ“‡å™¨ï¼Œåªåœ¨æ¸¬é©—å€åŸŸå…§æŸ¥æ‰¾
                const quizSection = document.querySelector('.mt-8.card');
                if (!quizSection) continue;
                
                const questionDivs = quizSection.querySelectorAll('div.mb-8, div.mb-6');
                const questionDiv = questionDivs[i - 1]; // ç¬¬iå€‹å•é¡Œï¼ˆç´¢å¼•å¾0é–‹å§‹ï¼‰
                
                if (questionDiv && t.questions[`q${i}`]) {
                    const questionTitle = questionDiv.querySelector('h3');
                    const options = questionDiv.querySelectorAll(`input[name="q${i}"] + span`);
                    
                    if (questionTitle) {
                        questionTitle.textContent = t.questions[`q${i}`].title;
                    }
                    
                    options.forEach((option, index) => {
                        const optionKey = ['A', 'B', 'C', 'D'][index];
                        if (t.questions[`q${i}`].options[optionKey]) {
                            option.textContent = t.questions[`q${i}`].options[optionKey];
                        }
                    });
                }
            }
        }

        function updateConcepts(t) {
            const conceptElements = document.querySelectorAll('.grid.grid-cols-1.md\\:grid-cols-3 h3, .grid.grid-cols-1.md\\:grid-cols-3 li');
            
            if (conceptElements.length >= 6) {
                conceptElements[0].textContent = t.demandEffects;
                conceptElements[3].textContent = t.supplyEffects;
                conceptElements[6].textContent = t.simultaneousEffects;
            }
            
            const listItems = document.querySelectorAll('.grid.grid-cols-1.md\\:grid-cols-3 li');
            if (listItems.length >= 6) {
                // æ ¹æ“šç•¶å‰èªè¨€ä½¿ç”¨æ­£ç¢ºçš„åˆ†éš”ç¬¦
                const separator = currentLang === 'zh' ? 'ï¼š' : ':';
                
                const demandIncreaseParts = t.demandIncrease.split(separator);
                const demandDecreaseParts = t.demandDecrease.split(separator);
                const supplyIncreaseParts = t.supplyIncrease.split(separator);
                const supplyDecreaseParts = t.supplyDecrease.split(separator);
                const quantityEffectParts = t.quantityEffect.split(separator);
                const priceEffectParts = t.priceEffect.split(separator);
                
                listItems[0].innerHTML = `<strong>${demandIncreaseParts[0]}${separator}</strong>${demandIncreaseParts[1] || ''}`;
                listItems[1].innerHTML = `<strong>${demandDecreaseParts[0]}${separator}</strong>${demandDecreaseParts[1] || ''}`;
                listItems[2].innerHTML = `<strong>${supplyIncreaseParts[0]}${separator}</strong>${supplyIncreaseParts[1] || ''}`;
                listItems[3].innerHTML = `<strong>${supplyDecreaseParts[0]}${separator}</strong>${supplyDecreaseParts[1] || ''}`;
                listItems[4].innerHTML = `<strong>${quantityEffectParts[0]}${separator}</strong>${quantityEffectParts[1] || ''}`;
                listItems[5].innerHTML = `<strong>${priceEffectParts[0]}${separator}</strong>${priceEffectParts[1] || ''}`;
            }
        }

        // åˆå§‹åŒ–æ‡‰ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            const chart = new EconomicsChart('economicsChart');
            window.economicsChart = chart;
            
            // èªè¨€åˆ‡æ›äº‹ä»¶
            document.getElementById('langCN').addEventListener('click', () => switchLanguage('zh'));
            document.getElementById('langEN').addEventListener('click', () => switchLanguage('en'));
            
            // éœ€æ±‚æ§åˆ¶æŒ‰éˆ•
            document.getElementById('increaseDemand').addEventListener('click', () => {
                chart.increaseDemand();
            });
            
            document.getElementById('decreaseDemand').addEventListener('click', () => {
                chart.decreaseDemand();
            });
            
            document.getElementById('resetDemand').addEventListener('click', () => {
                chart.resetDemand();
            });
            
            // ä¾›çµ¦æ§åˆ¶æŒ‰éˆ•
            document.getElementById('increaseSupply').addEventListener('click', () => {
                chart.increaseSupply();
            });
            
            document.getElementById('decreaseSupply').addEventListener('click', () => {
                chart.decreaseSupply();
            });
            
            document.getElementById('resetSupply').addEventListener('click', () => {
                chart.resetSupply();
            });
            
            // å…¨éƒ¨é‡è¨­æŒ‰éˆ•
            document.getElementById('resetAll').addEventListener('click', () => {
                chart.resetAll();
            });
            
            // æ¸¬é©—åŠŸèƒ½
            setupQuiz();
        });
        
        // è¨­ç½®æ¸¬é©—åŠŸèƒ½
        function setupQuiz() {
            // å•é¡Œ 1
            const q1Inputs = document.querySelectorAll('input[name="q1"]');
            q1Inputs.forEach(input => {
                input.addEventListener('change', function() {
                    const answer1Div = document.getElementById('answer1');
                    answer1Div.classList.remove('hidden');
                    const t = translations[currentLang];
                    
                    if (this.value === 'A') {
                        answer1Div.className = 'mt-4 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800';
                        answer1Div.innerHTML = `<div class="flex items-start"><span class="text-green-600 dark:text-green-400 mr-2">âœ…</span><div><strong class="text-green-700 dark:text-green-300">${t.questions.q1.correct}</strong><br><span class="text-green-600 dark:text-green-400 text-sm">${t.questions.q1.explanation.correct}</span></div></div>`;
                    } else {
                        answer1Div.className = 'mt-4 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800';
                        answer1Div.innerHTML = `<div class="flex items-start"><span class="text-red-600 dark:text-red-400 mr-2">âŒ</span><div><strong class="text-red-700 dark:text-red-300">${t.questions.q1.wrong}</strong><br><span class="text-red-600 dark:text-red-400 text-sm">${t.questions.q1.explanation.wrong}</span></div></div>`;
                    }
                });
            });
            
            // å•é¡Œ 2
            const q2Inputs = document.querySelectorAll('input[name="q2"]');
            q2Inputs.forEach(input => {
                input.addEventListener('change', function() {
                    const answer2Div = document.getElementById('answer2');
                    answer2Div.classList.remove('hidden');
                    const t = translations[currentLang];
                    
                    if (this.value === 'D') {
                        answer2Div.className = 'mt-4 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800';
                        answer2Div.innerHTML = `<div class="flex items-start"><span class="text-green-600 dark:text-green-400 mr-2">âœ…</span><div><strong class="text-green-700 dark:text-green-300">${t.questions.q2.correct}</strong><br><span class="text-green-600 dark:text-green-400 text-sm">${t.questions.q2.explanation.correct}</span></div></div>`;
                    } else {
                        answer2Div.className = 'mt-4 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800';
                        answer2Div.innerHTML = `<div class="flex items-start"><span class="text-red-600 dark:text-red-400 mr-2">âŒ</span><div><strong class="text-red-700 dark:text-red-300">${t.questions.q2.wrong}</strong><br><span class="text-red-600 dark:text-red-400 text-sm">${t.questions.q2.explanation.wrong}</span></div></div>`;
                    }
                });
            });
            
            // å•é¡Œ 3
            const q3Inputs = document.querySelectorAll('input[name="q3"]');
            q3Inputs.forEach(input => {
                input.addEventListener('change', function() {
                    const answer3Div = document.getElementById('answer3');
                    answer3Div.classList.remove('hidden');
                    const t = translations[currentLang];
                    
                    if (this.value === 'A') {
                        answer3Div.className = 'mt-4 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800';
                        answer3Div.innerHTML = `<div class="flex items-start"><span class="text-green-600 dark:text-green-400 mr-2">âœ…</span><div><strong class="text-green-700 dark:text-green-300">${t.questions.q3.correct}</strong><br><span class="text-green-600 dark:text-green-400 text-sm">${t.questions.q3.explanation.correct}</span></div></div>`;
                    } else {
                        answer3Div.className = 'mt-4 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800';
                        answer3Div.innerHTML = `<div class="flex items-start"><span class="text-red-600 dark:text-red-400 mr-2">âŒ</span><div><strong class="text-red-700 dark:text-red-300">${t.questions.q3.wrong}</strong><br><span class="text-red-600 dark:text-red-400 text-sm">${t.questions.q3.explanation.wrong}</span></div></div>`;
                    }
                });
            });
            
            // å•é¡Œ 4
            const q4Inputs = document.querySelectorAll('input[name="q4"]');
            q4Inputs.forEach(input => {
                input.addEventListener('change', function() {
                    const answer4Div = document.getElementById('answer4');
                    answer4Div.classList.remove('hidden');
                    const t = translations[currentLang];
                    
                    if (this.value === 'A') {
                        answer4Div.className = 'mt-4 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800';
                        answer4Div.innerHTML = `<div class="flex items-start"><span class="text-green-600 dark:text-green-400 mr-2">âœ…</span><div><strong class="text-green-700 dark:text-green-300">${t.questions.q4.correct}</strong><br><span class="text-green-600 dark:text-green-400 text-sm">${t.questions.q4.explanation.correct}</span></div></div>`;
                    } else {
                        answer4Div.className = 'mt-4 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800';
                        answer4Div.innerHTML = `<div class="flex items-start"><span class="text-red-600 dark:text-red-400 mr-2">âŒ</span><div><strong class="text-red-700 dark:text-red-300">${t.questions.q4.wrong}</strong><br><span class="text-red-600 dark:text-red-400 text-sm">${t.questions.q4.explanation.wrong}</span></div></div>`;
                    }
                });
            });
            
            // å•é¡Œ 5
            const q5Inputs = document.querySelectorAll('input[name="q5"]');
            q5Inputs.forEach(input => {
                input.addEventListener('change', function() {
                    const answer5Div = document.getElementById('answer5');
                    answer5Div.classList.remove('hidden');
                    const t = translations[currentLang];
                    
                    if (this.value === 'B') {
                        answer5Div.className = 'mt-4 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800';
                        answer5Div.innerHTML = `<div class="flex items-start"><span class="text-green-600 dark:text-green-400 mr-2">âœ…</span><div><strong class="text-green-700 dark:text-green-300">${t.questions.q5.correct}</strong><br><span class="text-green-600 dark:text-green-400 text-sm">${t.questions.q5.explanation.correct}</span></div></div>`;
                    } else {
                        answer5Div.className = 'mt-4 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800';
                        answer5Div.innerHTML = `<div class="flex items-start"><span class="text-red-600 dark:text-red-400 mr-2">âŒ</span><div><strong class="text-red-700 dark:text-red-300">${t.questions.q5.wrong}</strong><br><span class="text-red-600 dark:text-red-400 text-sm">${t.questions.q5.explanation.wrong}</span></div></div>`;
                    }
                });
            });
        }
    </script>
</body>
</html>
